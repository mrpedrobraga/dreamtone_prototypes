[gd_scene load_steps=14 format=2]

[ext_resource path="res://assets/base.png" type="Texture" id=1]
[ext_resource path="res://assets/enemie_ratmare.png" type="Texture" id=2]
[ext_resource path="res://Attack.gd" type="Script" id=3]
[ext_resource path="res://assets/fx_bam.png" type="Texture" id=4]
[ext_resource path="res://assets/forest_battle.ogg" type="AudioStream" id=5]
[ext_resource path="res://Camera2D.gd" type="Script" id=6]
[ext_resource path="res://BattleScene.gd" type="Script" id=7]
[ext_resource path="res://assets/snd_hit.wav" type="AudioStream" id=8]
[ext_resource path="res://BAM.gd" type="Script" id=9]
[ext_resource path="res://assets/ball.png" type="Texture" id=10]
[ext_resource path="res://assets/punch.png" type="Texture" id=11]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

void fragment() {
	vec2 uv = UV;
	uv -= 0.5;
	
	uv.x *= 1.05 + 0.03 * sin(TIME * 4.0);
	uv.y *= 1.05 + 0.03 * cos(TIME * 4.0);
	
	uv += 0.5;
	COLOR = texture(TEXTURE, uv);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )

[node name="Node2D" type="Control"]
pause_mode = 2
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 7 )

[node name="Hit" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 8 )

[node name="Timer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
current = true
script = ExtResource( 6 )

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 5 )
autoplay = true

[node name="BAM" type="TextureRect" parent="."]
pause_mode = 2
modulate = Color( 1, 1, 1, 0 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -2.0
margin_top = -2.0
margin_right = 1.0
margin_bottom = 1.0
texture = ExtResource( 4 )
expand = true
stretch_mode = 6
script = ExtResource( 9 )

[node name="Base" type="TextureRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -2.0
margin_top = -2.0
margin_right = 1.0
margin_bottom = 1.0
texture = ExtResource( 1 )
expand = true
stretch_mode = 6

[node name="EnemieRatmare" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_left = 90.0
margin_top = 24.0
margin_right = 153.0
margin_bottom = 77.0
texture = ExtResource( 2 )
expand = true

[node name="Attack" type="Control" parent="."]
pause_mode = 1
margin_left = 86.0
margin_top = 24.0
margin_right = 154.0
margin_bottom = 79.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 10 )

[node name="Hitbox" type="Control" parent="Attack"]
margin_left = 27.0
margin_top = 20.0
margin_right = 48.0
margin_bottom = 38.0

[node name="Attack2" type="Control" parent="."]
pause_mode = 1
margin_left = 86.0
margin_top = 24.0
margin_right = 154.0
margin_bottom = 79.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 11 )
attack_mode = 1
action = "A"
time_offset = 0.25

[node name="Hitbox" type="Control" parent="Attack2"]
margin_left = 27.0
margin_top = 20.0
margin_right = 48.0
margin_bottom = 38.0

[connection signal="hit" from="Attack" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attack" to="." method="_on_Attack_miss"]
[connection signal="hit" from="Attack2" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attack2" to="." method="_on_Attack_miss"]
