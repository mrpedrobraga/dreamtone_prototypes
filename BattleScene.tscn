[gd_scene load_steps=16 format=2]

[ext_resource path="res://assets/base.png" type="Texture" id=1]
[ext_resource path="res://assets/enemie_punkman.png" type="Texture" id=2]
[ext_resource path="res://Attack.gd" type="Script" id=3]
[ext_resource path="res://assets/fx_bam.png" type="Texture" id=4]
[ext_resource path="res://assets/mus_dreamy_foes.ogg" type="AudioStream" id=5]
[ext_resource path="res://Camera2D.gd" type="Script" id=6]
[ext_resource path="res://BattleScene.gd" type="Script" id=7]
[ext_resource path="res://assets/snd_hit.wav" type="AudioStream" id=8]
[ext_resource path="res://BAM.gd" type="Script" id=9]
[ext_resource path="res://assets/indicator_nathan.png" type="Texture" id=10]
[ext_resource path="res://assets/indicator_neil.png" type="Texture" id=11]
[ext_resource path="res://assets/indicator_jenny.png" type="Texture" id=12]
[ext_resource path="res://assets/indicator_darell.png" type="Texture" id=13]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

void fragment() {
	vec2 uv = UV;
	uv -= 0.5;
	
	uv.x *= 1.05 + 0.03 * sin(TIME * 4.0);
	uv.y *= 1.05 + 0.03 * cos(TIME * 4.0);
	
	uv += 0.5;
	COLOR = texture(TEXTURE, uv);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )

[node name="Battle" type="Control"]
pause_mode = 2
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}

[node name="Hit" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 8 )

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 5 )

[node name="Timer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
current = true
script = ExtResource( 6 )
__meta__ = {
"_edit_lock_": true
}

[node name="BAM" type="TextureRect" parent="."]
pause_mode = 2
modulate = Color( 1, 1, 1, 0 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -2.0
margin_top = -2.0
margin_right = 1.0
margin_bottom = 1.0
texture = ExtResource( 4 )
expand = true
stretch_mode = 6
script = ExtResource( 9 )
__meta__ = {
"_edit_lock_": true
}

[node name="Base" type="TextureRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -2.0
margin_top = -2.0
margin_right = 1.0
margin_bottom = 1.0
texture = ExtResource( 1 )
expand = true
stretch_mode = 6
__meta__ = {
"_edit_lock_": true
}

[node name="Enemy1" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_left = 24.0
margin_top = 25.0
margin_right = 73.0
margin_bottom = 76.0
rect_pivot_offset = Vector2( 0, 20 )
texture = ExtResource( 2 )
expand = true
__meta__ = {
"_edit_lock_": true
}

[node name="Hitbox" type="Control" parent="Enemy1" groups=["Hitbox"]]
margin_left = 8.0
margin_top = 6.0
margin_right = 29.0
margin_bottom = 24.0

[node name="Enemy2" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_left = 76.0
margin_top = 24.0
margin_right = 125.0
margin_bottom = 75.0
rect_pivot_offset = Vector2( 0, 20 )
texture = ExtResource( 2 )
expand = true
__meta__ = {
"_edit_lock_": true
}

[node name="Hitbox" type="Control" parent="Enemy2" groups=["Hitbox"]]
margin_left = 6.0
margin_top = 4.0
margin_right = 27.0
margin_bottom = 22.0

[node name="Enemy3" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_left = 127.0
margin_top = 23.0
margin_right = 176.0
margin_bottom = 74.0
rect_pivot_offset = Vector2( 0, 20 )
texture = ExtResource( 2 )
expand = true
__meta__ = {
"_edit_lock_": true
}

[node name="Hitbox" type="Control" parent="Enemy3" groups=["Hitbox"]]
margin_left = 7.0
margin_top = 4.0
margin_right = 28.0
margin_bottom = 22.0

[node name="Enemy4" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_left = 178.0
margin_top = 22.0
margin_right = 227.0
margin_bottom = 73.0
rect_pivot_offset = Vector2( 0, 20 )
texture = ExtResource( 2 )
expand = true
__meta__ = {
"_edit_lock_": true
}

[node name="Hitbox" type="Control" parent="Enemy4" groups=["Hitbox"]]
margin_left = 8.0
margin_top = 3.0
margin_right = 29.0
margin_bottom = 21.0

[node name="Attacks" type="Control" parent="."]
margin_right = 40.0
margin_bottom = 40.0

[node name="AttackNathan" type="Control" parent="Attacks"]
pause_mode = 1
margin_left = 22.0
margin_top = 27.0
margin_right = 59.0
margin_bottom = 50.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 10 )
action = "A"

[node name="AttackNeil" type="Control" parent="Attacks"]
pause_mode = 1
margin_left = 78.0
margin_top = 27.0
margin_right = 114.0
margin_bottom = 47.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 11 )
action = "A"

[node name="AttackJenny" type="Control" parent="Attacks"]
pause_mode = 1
margin_left = 129.0
margin_top = 26.0
margin_right = 166.0
margin_bottom = 48.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 12 )
action = "A"

[node name="AttackDarell" type="Control" parent="Attacks"]
pause_mode = 1
margin_left = 177.0
margin_top = 23.0
margin_right = 214.0
margin_bottom = 53.0
script = ExtResource( 3 )
indicator_texture = ExtResource( 13 )
action = "A"

[connection signal="hit" from="Attacks/AttackNathan" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attacks/AttackNathan" to="." method="_on_Attack_miss"]
[connection signal="hit" from="Attacks/AttackNeil" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attacks/AttackNeil" to="." method="_on_Attack_miss"]
[connection signal="hit" from="Attacks/AttackJenny" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attacks/AttackJenny" to="." method="_on_Attack_miss"]
[connection signal="hit" from="Attacks/AttackDarell" to="." method="_on_Attack_hit"]
[connection signal="miss" from="Attacks/AttackDarell" to="." method="_on_Attack_miss"]
